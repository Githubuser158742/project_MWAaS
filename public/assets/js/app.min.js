var app={page:"all",activeTab:null,reload:null};$(function(){function e(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return a[e]})}app.loadJSON=function(){var e=new Request("http://localhost:3000/assets/data/recipes.json",{method:"GET",mode:"cors",redirect:"follow",cache:"no-cache",headers:new Headers({"Content-Type":"application/json"})});fetch(e).then(function(e){if(e.ok)return e.json();app.loadData(),1==app.reload&&(alert("Er kon geen verbinding gemaakt worden met de database!"),app.reload=0)}).then(function(e){app.updateDB(e),1==app.reload&&(alert("Database updated!"),app.reload=0)}).catch(function(e){app.loadData(),1==app.reload&&(alert("Er kon geen data weggeschreven worden!"),app.reload=0)})},app.updateDB=function(e){var a=localforage.createInstance({name:"recipe_store"}),i={},t=[];e.recipes.forEach(function(e){(i={}).id=e.id,i.description=e.description,i.chef=e.chef,i.category=e.category,i.added=e.added,i.steps=e.steps,t.push(i)}),a.setItem("recipes",JSON.stringify(t)),app.loadData()},app.updateCustomDB=function(e){localforage.createInstance({name:"recipe_store"}).setItem("customvalues",JSON.stringify(app.customvalues))},app.loadData=function(){var e=localforage.createInstance({name:"recipe_store"});e.getItem("recipes").then(function(a){app.recipes=JSON.parse(a),e.getItem("customvalues").then(function(e){app.customvalues=[],null!==JSON.parse(e)&&void 0!==JSON.parse(e)&&$.each(JSON.parse(e),function(e,a){null!==a&&void 0!==a&&(app.customvalues[a.recipe_id]=a)}),app.showData()})})},app.showData=function(){switch($("#pageone").is(".ui.page-active")&&(app.page="all"),$("#pagetwo").is(".ui-page-active")&&(app.page="saved"),$("#pagethree").is(".ui-page-active")&&(app.page="rated"),app.page){case"all":$("#btnOne").trigger("buildpage");break;case"saved":$("#btnTwo").trigger("buildpage");break;case"rated":$("#btnThree").trigger("buildpage")}},app.sortById=function(e,a){var i=parseInt(e.id),t=parseInt(a.id);return i<t?-1:i>t?1:0},app.showRecipes=function(e){var a=null;switch(e){case 1:a=app.activeTab;break;case 2:a=app.activeTab+"Saved";break;case 3:a=app.activeTab+"Rated";break;default:a=app.activeTab}$("#"+a).html("");var i=1;switch(app.activeTab){case"meat":case"fish":case"veggie":app.recipes.sort(app.sortById)}if(null==app.recipes){$("#"+a).append("Gelieve een categorie te kiezen.")}$.each(app.recipes,function(t,p){var c=!1,o=!1,n=!1,s="",l="";if(p.category==app.activeTab&&(1==e&&(c=!0,null!==app.customvalues[p.id]&&void 0!==app.customvalues[p.id]&&1==app.customvalues[p.id].saved&&(c=!1)),null!==app.customvalues[p.id]&&void 0!==app.customvalues[p.id]&&(null!==app.customvalues[p.id].score&&(s=app.customvalues[p.id].score),null!==app.customvalues[p.id].comment&&(l=app.customvalues[p.id].comment),null!==app.customvalues[p.id].saved&&2==e?o=!0:null===app.customvalues[p.id].saved||3!=e||""===s&&""===l||(n=!0))),c){r=["<div class='ui-bar ui-bar-b'>","<div class='ui-grid-a'><center>","<input class='checkboxrecipe' id='checkBox"+p.id.toString()+"' data-recipe='"+p.id.toString()+"' type='checkbox'>"+p.description.toString()+"</center></div>","<div class='ui-grid-a'>","<div class='ui-block-a'><center>"+p.chef.toString()+"</center></div>","<div class='ui-block-b'><center>"+p.added.toString()+"</center></div>","</div>","<center><div data-role='collapsible' id='"+a+"' class='ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-themed-content'>","<h4 class='ui-collapsible-heading'>Stappenplan</h4>","<p>"+p.steps.toString()+"</p>","</center></div>","</div>"].join(" ");$("#"+a).append(r),$("#"+a).trigger("create")}if(o){r=["<div class='ui-bar ui-bar-b'>","<div class='ui-grid-a'>","<center>"+p.description.toString()+"</center>","</div>","<div class='ui-grid-a'>","<div class='ui-block-a'>","<center>"+p.chef.toString()+"</center>","</div>","<div class='ui-block-b'>","<center>"+p.added.toString()+"</center>","</div>","</div>","<div data-role='collapsible' id='"+a+"' class='ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-themed-content'>","<h4 class='ui-collapsible-heading'>Stappenplan</h4>","<p>"+p.steps.toString()+"</p>","</div>","<div data-role='fieldcontain'>","<div class='ui-grid-a'>","<div class='ui-block-a'>","<label for='scorerecipe' class='select'>Score op 10:</label>","<select class='scorerecipe' id='"+app.activeTab+"scorerecipe"+p.id.toString()+"' data-recipe='"+p.id.toString()+"'>","<option value=''"+(""==s.toString()?"selected":"")+">--</option>","<option value='10'"+("10"==s.toString()?"selected":"")+">10</option>","<option value='8'"+("8"==s.toString()?"selected":"")+">8</option>","<option value='7'"+("7"==s.toString()?"selected":"")+">7</option>","<option value='6'"+("6"==s.toString()?"selected":"")+">6</option>","<option value='5'"+("5"==s.toString()?"selected":"")+">5</option>","<option value='4'"+("4"==s.toString()?"selected":"")+">4</option>","<option value='3'"+("3"==s.toString()?"selected":"")+">3</option>","<option value='2'"+("2"==s.toString()?"selected":"")+">2</option>","<option value='1'"+("1"==s.toString()?"selected":"")+">1</option>","<option value='0'"+("0"==s.toString()?"selected":"")+">0</option>","</select>","</div>","<div class='ui-block-b'>","<label for='commentrecipe' class='input'>Opmerking:</label>","<textarea class='commentrecipe' id='"+app.activeTab+"commentrecipe"+p.id.toString()+"' data-recipe='"+p.id.toString()+"' maxlength='150' rows='2'>"+l.toString()+"</textarea>","</div>","</div>","</div>","<div>"].join(" ");$("#"+a).append(r),$("#"+a).trigger("create"),i++}if(n){var r=["<div class='ui-bar ui-bar-b'>","<div class='ui-grid-a'>",p.description.toString(),"</div>","<div class='ui-grid-a'>","<div class='ui-block-a'>",p.chef.toString(),"</div>","<div class='ui-block-b'>",p.added.toString(),"</div>","</div>","<div class='ui-grid-a'>","<div class='ui-block-a'>","Score: "+s.toString(),"</div>","<div class='ui-block-b'>","Commentaar: "+l.toString(),"</div>","</div>","<div data-role='collapsible' id='"+a+"' class='ui-collapsible ui-collapsible-inset ui-corner-all ui-collapsible-themed-content'>","<h4 class='ui-collapsible-heading'>Stappenplan</h4>","<p>"+p.steps.toString()+"</p>","</div>","</div>"].join(" ");$("#"+a).append(r),$("#"+a).trigger("create")}})},$("#btnOne").on("click buildpage",function(e){app.activeTab="meat",$("#pageMeat").addClass("ui-btn-active"),app.showRecipes(1)}),$("#pageMeat").on("click",function(e){app.activeTab="meat",app.showRecipes(1)}),$("#pageFish").on("click",function(e){app.activeTab="fish",app.showRecipes(1)}),$("#pageVeggie").on("click",function(e){app.activeTab="veggie",app.showRecipes(1)}),$(document).on("change",function(e){var a=$("#"+e.target.id+":checkbox:checked").length>0,i=parseInt($("#"+e.target.id).data("recipe"));i&&null!==a&&void 0!==a&&(null===app.customvalues[i]||void 0===app.customvalues[i]?app.customvalues[i]={recipe_id:i,saved:a,score:null,comment:null}:app.customvalues[i].saved=a,alert("Het recept is opgeslagen!"),app.updateCustomDB())}),$(document).on("change",function(e){var a=$("#"+e.target.id+" option:selected").val(),i=parseInt($("#"+e.target.id).data("recipe"));i&&null!==a&&void 0!==a&&(null===app.customvalues[i]||void 0===app.customvalues[i]?app.customvalues[i]={recipe_id:i,score:a,comment:null}:app.customvalues[i].score=a,app.updateCustomDB())}),$(document).on("keyup",function(a){var i=$("#"+a.target.id).val();i=e(i);var t=parseInt($("#"+a.target.id).data("recipe"));null!==t&&void 0!==t&&NaN!==t&&null!==i&&void 0!==i&&(null===app.customvalues[t]||void 0===app.customvalues[t]?app.customvalues[t]={recipe_id:t,score:null,comment:i}:app.customvalues[t].comment=i,app.updateCustomDB())}),$("#btnTwo").on("click buildpage",function(e){app.page="saved",app.activeTab="meat",$("#pageMeatSaved").addClass("ui-btn-active"),app.showRecipes(2)}),$("#pageMeatSaved").on("click",function(e){app.activeTab="meat",app.showRecipes(2)}),$("#pageFishSaved").on("click",function(e){app.activeTab="fish",app.showRecipes(2)}),$("#pageVeggieSaved").on("click",function(e){app.activeTab="veggie",app.showRecipes(2)}),$("#btnThree").on("click buildpage",function(e){app.page="rated",app.activeTab="meat",$("#pageMeatRated").addClass("ui-btn-active"),app.showRecipes(3)}),$("#pageMeatRated").on("click",function(e){app.activeTab="meat",app.showRecipes(3)}),$("#pageFishRated").on("click",function(e){app.activeTab="fish",app.showRecipes(3)}),$("#pageVeggieRated").on("click",function(e){app.activeTab="veggie",app.showRecipes(3)}),$("#btnRefresh").on("click",function(e){location.reload()}),$("#btnRefresh2").on("click",function(e){location.reload()}),$("#btnRefresh3").on("click",function(e){location.reload()}),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(function(){});var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};app.loadJSON()});
